# Prisma Migrations

This directory contains the database schema migration files generated by Prisma.

## How Migrations Work

Prisma Migrate uses a declarative approach. You define your desired schema in `prisma/schema.prisma`, and Prisma Migrate figures out the SQL to get your database to that state.

Each subdirectory in `prisma/migrations/` represents a single migration. It typically contains a `migration.sql` file with the SQL commands for that migration.

## Generating Migrations (Development)

To generate a new migration during development after changing your `prisma/schema.prisma` file, run:

```bash
pnpm prisma:migrate:dev --name your_migration_name
```

Replace `your_migration_name` with a descriptive name for your migration (e.g., `add_user_roles`, `create_post_table`). This command will:

1. Create a new migration file in this directory.
2. Apply the migration to your development database.
3. Ensure your Prisma Client is up-to-date with the new schema.

## Applying Migrations (Production/Staging)

To apply pending migrations to a database (e.g., in a deployment script for production or staging), run:

```bash
pnpm prisma:migrate:deploy
```

This command applies all pending migrations without generating new ones or prompting for input. It's designed for non-interactive environments.

## Resetting the Database (Development Only)

**Warning: This will delete all data in your database.**
To reset your development database and re-apply all migrations:

```bash
pnpm prisma migrate reset
```

## Database Seeding

After migrations are applied, you can seed your database with initial data using:

```bash
pnpm prisma:seed
```

This command executes the script defined in `prisma.seed` in your `package.json` (e.g., `tsx prisma/seed.ts`).

---

**Note:** Do not manually edit the SQL files in this directory unless you are very familiar with SQL and Prisma's migration internals. It's generally safer to modify your `schema.prisma` file and let Prisma generate the migrations.
